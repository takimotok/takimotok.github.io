---
import { getCollection, render } from 'astro:content'
import LanguagePicker from '@/components/LanguagePicker.astro'
import { getLangFromUrl } from '@/i18n/utils'
import JapaneseResumeLayout from '@/layouts/JapaneseResumeLayout.astro'

const jaResumes = await getCollection('resumes', ({ id }) => {
  return id.startsWith('ja')
})
const [jaResume] = jaResumes
if (!jaResume) {
  throw new Error('Japanese resume not found')
}

const { Content } = await render(jaResume)
const lang = getLangFromUrl(Astro.url)
---

<LanguagePicker currentLang={lang} />
<JapaneseResumeLayout content={jaResume.data}>
  <Content />
</JapaneseResumeLayout>
