---
import { getEntry, render } from 'astro:content'
import LanguagePicker from '@/components/LanguagePicker.astro'
import { getLangFromUrl } from '@/i18n/utils'
import ResumeLayout from '@/layouts/ResumeLayout.astro'

const resume = await getEntry('resumes', 'default')
if (!resume) {
  throw new Error('Resume not found')
}

const { Content } = await render(resume)
const lang = getLangFromUrl(Astro.url)
---

<LanguagePicker currentLang={lang} />
<ResumeLayout content={resume.data}>
  <Content />
</ResumeLayout>
